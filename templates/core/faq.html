{% extends 'base.html' %}
{% load static %}

{% block title %}FAQ - Questions Fréquentes | E-Commerce Gabon{% endblock %}

{% block meta_description %}
Trouvez rapidement les réponses aux questions les plus fréquemment posées sur nos produits, livraisons, paiements et retours.
{% endblock %}

{% block content %}

<!-- ========================================
     HERO FAQ MODERNE
     ======================================== -->
<section class="faq-hero">
    <div class="faq-hero-bg"></div>
    <div class="container">
        <div class="row align-items-center min-vh-60">
            <div class="col-lg-6 mb-4 mb-lg-0" data-aos="fade-right">
                <div class="faq-hero-content">
                    <span class="hero-badge-faq">
                        <i class="fas fa-question-circle"></i> Centre d'aide
                    </span>
                    <h1 class="faq-hero-title">
                        Comment Pouvons-Nous
                        <span class="gradient-text">Vous Aider ?</span>
                    </h1>
                    <p class="faq-hero-description">
                        Trouvez rapidement les réponses à toutes vos questions sur nos produits, 
                        livraisons, paiements et retours.
                    </p>
                </div>
            </div>
            
            <div class="col-lg-6" data-aos="fade-left">
                <div class="faq-search-card">
                    <div class="search-icon-large">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3 class="search-card-title">Rechercher votre question</h3>
                    <form class="faq-search-form">
                        <div class="search-input-wrapper">
                            <i class="fas fa-search"></i>
                            <input type="text" 
                                   id="faq-search" 
                                   placeholder="Ex: Comment suivre ma commande ?"
                                   autocomplete="off">
                            <button type="button" class="search-clear" id="clear-search" style="display: none;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </form>
                    <div id="search-results" class="search-results"></div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========================================
     CATÉGORIES FAQ
     ======================================== -->
<section class="section-modern faq-categories-section">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <span class="section-badge">Explorer</span>
            <h2 class="section-title">Parcourir par Catégorie</h2>
            <p class="section-subtitle">
                Choisissez une catégorie pour trouver rapidement votre réponse
            </p>
        </div>
        
        <div class="faq-categories-grid">
            <a href="#commandes" class="faq-category-card" data-aos="fade-up">
                <div class="category-icon icon-primary">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h4 class="category-title">Commandes</h4>
                <p class="category-description">Tout sur vos commandes</p>
                <div class="category-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </a>
            
            <a href="#livraison" class="faq-category-card" data-aos="fade-up">
                <div class="category-icon icon-success">
                    <i class="fas fa-truck"></i>
                </div>
                <h4 class="category-title">Livraison</h4>
                <p class="category-description">Infos sur la livraison</p>
                <div class="category-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </a>
            
            <a href="#paiement" class="faq-category-card" data-aos="fade-up">
                <div class="category-icon icon-warning">
                    <i class="fas fa-credit-card"></i>
                </div>
                <h4 class="category-title">Paiement</h4>
                <p class="category-description">Moyens de paiement</p>
                <div class="category-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </a>
            
            <a href="#retours" class="faq-category-card" data-aos="fade-up">
                <div class="category-icon icon-info">
                    <i class="fas fa-undo"></i>
                </div>
                <h4 class="category-title">Retours</h4>
                <p class="category-description">Retours et remboursements</p>
                <div class="category-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- ========================================
     QUESTIONS ET RÉPONSES
     ======================================== -->
<section class="section-modern faq-content-section">
    <div class="container">
        {% for faq_category in faqs %}
        <div class="faq-category-section" id="{{ faq_category.category|slugify }}" data-aos="fade-up">
            <div class="faq-category-header">
                <div class="category-icon-header">
                    {% if faq_category.category == "Commandes" %}
                    <i class="fas fa-shopping-cart"></i>
                    {% elif faq_category.category == "Livraison" %}
                    <i class="fas fa-truck"></i>
                    {% elif faq_category.category == "Paiement" %}
                    <i class="fas fa-credit-card"></i>
                    {% elif faq_category.category == "Retours et Remboursements" %}
                    <i class="fas fa-undo"></i>
                    {% else %}
                    <i class="fas fa-user"></i>
                    {% endif %}
                </div>
                <div class="category-header-text">
                    <h3 class="category-header-title">{{ faq_category.category }}</h3>
                    <p class="category-header-count">{{ faq_category.questions|length }} question{{ faq_category.questions|length|pluralize }}</p>
                </div>
            </div>
            
            <div class="faq-accordion">
                {% for question in faq_category.questions %}
                <div class="faq-item" data-faq-item>
                    <div class="faq-question" data-faq-toggle>
                        <div class="faq-question-text">
                            <i class="fas fa-question-circle"></i>
                            <span>{{ question.question }}</span>
                        </div>
                        <div class="faq-toggle-icon">
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    <div class="faq-answer" data-faq-content>
                        <div class="faq-answer-inner">
                            {{ question.answer|linebreaks }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- ========================================
     BESOIN D'AIDE SUPPLÉMENTAIRE
     ======================================== -->
<section class="section-modern help-section">
    <div class="container">
        <div class="help-card" data-aos="zoom-in">
            <div class="help-bg-pattern"></div>
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <div class="help-content">
                        <div class="help-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h3 class="help-title">Besoin d'Aide Supplémentaire ?</h3>
                        <p class="help-description">
                            Vous ne trouvez pas la réponse à votre question ? 
                            Notre équipe est disponible 24/7 pour vous assister.
                        </p>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="help-actions">
                        <a href="{% url 'core:contact' %}" class="help-action-btn primary">
                            <div class="action-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="action-text">
                                <h5>Email</h5>
                                <p>Réponse sous 24h</p>
                            </div>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        
                        <a href="tel:+24101234567" class="help-action-btn success">
                            <div class="action-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="action-text">
                                <h5>Téléphone</h5>
                                <p>Lun - Sam: 8h - 18h</p>
                            </div>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        
                        <a href="https://wa.me/24192222222" target="_blank" class="help-action-btn whatsapp">
                            <div class="action-icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="action-text">
                                <h5>WhatsApp</h5>
                                <p>Assistance instantanée</p>
                            </div>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========================================
     RESSOURCES UTILES
     ======================================== -->
<section class="section-modern resources-section">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <span class="section-badge">Ressources</span>
            <h2 class="section-title">Guides et Documentation</h2>
            <p class="section-subtitle">
                Découvrez nos guides pour mieux utiliser notre plateforme
            </p>
        </div>
        
        <div class="resources-grid">
            <div class="resource-card" data-aos="fade-up">
                <div class="resource-icon">
                    <i class="fas fa-book"></i>
                </div>
                <h4 class="resource-title">Guide d'Achat</h4>
                <p class="resource-description">
                    Apprenez comment passer une commande sur notre site en quelques clics.
                </p>
                <a href="#" class="resource-link">
                    <span>Lire le guide</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="resource-card" data-aos="fade-up">
                <div class="resource-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h4 class="resource-title">Conditions Générales</h4>
                <p class="resource-description">
                    Consultez nos conditions générales de vente et d'utilisation.
                </p>
                <a href="#" class="resource-link">
                    <span>Voir les CGV</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="resource-card" data-aos="fade-up">
                <div class="resource-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h4 class="resource-title">Confidentialité</h4>
                <p class="resource-description">
                    Découvrez comment nous protégeons vos données personnelles.
                </p>
                <a href="#" class="resource-link">
                    <span>En savoir plus</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- ========================================
     STYLES CSS
     ======================================== -->
<style>
/* ===================================
   VARIABLES
   =================================== */
:root {
    --primary-color: #e74c3c;
    --primary-hover: #ff6b6b;
    --success-color: #28a745;
    --warning-color: #ffc107;
    --info-color: #17a2b8;
    --dark-bg: #1a1a2e;
    --darker-bg: #16213e;
    --text-dark: #2c3e50;
    --text-muted: #6c757d;
    --bg-light: #f8f9fa;
    --border-radius: 12px;
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===================================
   UTILITAIRES
   =================================== */
.section-modern {
    padding: 80px 0;
    position: relative;
}

.min-vh-60 {
    min-height: 60vh;
}

.gradient-text {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Section Header */
.section-header {
    text-align: center;
    margin-bottom: 60px;
}

.section-badge {
    display: inline-block;
    padding: 8px 20px;
    background: rgba(231, 76, 60, 0.1);
    color: var(--primary-color);
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.section-title {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 15px;
}

.section-subtitle {
    font-size: 1.125rem;
    color: var(--text-muted);
    max-width: 600px;
    margin: 0 auto;
}

/* ===================================
   HERO FAQ
   =================================== */
.faq-hero {
    background: linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 100%);
    padding: 100px 0 80px;
    position: relative;
    overflow: hidden;
}

.faq-hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(circle at 20% 50%, rgba(231, 76, 60, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(231, 76, 60, 0.05) 0%, transparent 50%);
    pointer-events: none;
}

.faq-hero-content {
    position: relative;
    z-index: 2;
}

.hero-badge-faq {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 50px;
    color: white;
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: 25px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.faq-hero-title {
    font-size: 3rem;
    font-weight: 800;
    color: white;
    line-height: 1.2;
    margin-bottom: 20px;
}

.faq-hero-description {
    font-size: 1.125rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
}

/* ===================================
   CARTE DE RECHERCHE
   =================================== */
.faq-search-card {
    background: white;
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 12px 48px rgba(0, 0, 0, 0.3);
    position: relative;
}

.search-icon-large {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
}

.search-icon-large i {
    font-size: 2rem;
    color: white;
}

.search-card-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 25px;
    text-align: center;
}

.search-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.search-input-wrapper i.fa-search {
    position: absolute;
    left: 20px;
    color: var(--text-muted);
    font-size: 1.1rem;
}

.search-input-wrapper input {
    width: 100%;
    padding: 16px 50px 16px 55px;
    border: 2px solid #e9ecef;
    border-radius: 50px;
    font-size: 1rem;
    transition: var(--transition);
}

.search-input-wrapper input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.1);
}

.search-clear {
    position: absolute;
    right: 15px;
    width: 32px;
    height: 32px;
    background: var(--text-muted);
    border: none;
    border-radius: 50%;
    color: white;
    cursor: pointer;
    transition: var(--transition);
}

.search-clear:hover {
    background: var(--primary-color);
    transform: scale(1.1);
}

.search-results {
    margin-top: 20px;
    max-height: 400px;
    overflow-y: auto;
}

.search-result-item {
    padding: 15px;
    background: var(--bg-light);
    border-radius: 12px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: var(--transition);
}

.search-result-item:hover {
    background: rgba(231, 76, 60, 0.1);
    transform: translateX(5px);
}

/* ===================================
   CATÉGORIES FAQ
   =================================== */
.faq-categories-section {
    background: white;
}

.faq-categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
}

.faq-category-card {
    background: white;
    border: 2px solid #e9ecef;
    border-radius: var(--border-radius);
    padding: 30px;
    text-align: center;
    text-decoration: none;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.faq-category-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    opacity: 0;
    transition: var(--transition);
    z-index: 0;
}

.faq-category-card:hover::before {
    opacity: 0.05;
}

.faq-category-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(231, 76, 60, 0.15);
}

.faq-category-card > * {
    position: relative;
    z-index: 1;
}

.category-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    transition: var(--transition);
}

.category-icon i {
    font-size: 2rem;
    color: white;
}

.icon-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
}

.icon-success {
    background: linear-gradient(135deg, var(--success-color), #20c997);
}

.icon-warning {
    background: linear-gradient(135deg, var(--warning-color), #ffcd39);
}

.icon-info {
    background: linear-gradient(135deg, var(--info-color), #5bc0de);
}

.faq-category-card:hover .category-icon {
    transform: scale(1.1) rotate(5deg);
}

.category-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 10px;
}

.category-description {
    font-size: 0.95rem;
    color: var(--text-muted);
    margin-bottom: 15px;
}

.category-arrow {
    width: 40px;
    height: 40px;
    background: var(--bg-light);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    transition: var(--transition);
}

.category-arrow i {
    color: var(--primary-color);
    transition: var(--transition);
}

.faq-category-card:hover .category-arrow {
    background: var(--primary-color);
}

.faq-category-card:hover .category-arrow i {
    color: white;
    transform: translateX(3px);
}

/* ===================================
   CONTENU FAQ
   =================================== */
.faq-content-section {
    background: var(--bg-light);
}

.faq-category-section {
    margin-bottom: 60px;
}

.faq-category-section:last-child {
    margin-bottom: 0;
}

.faq-category-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 30px;
}

.category-icon-header {
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.category-icon-header i {
    font-size: 2rem;
    color: white;
}

.category-header-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-dark);
    margin: 0;
}

.category-header-count {
    font-size: 0.95rem;
    color: var(--text-muted);
    margin: 0;
}

/* Accordion FAQ */
.faq-accordion {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.faq-item {
    background: white;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: var(--transition);
}

.faq-item:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.faq-item.active {
    box-shadow: 0 4px 16px rgba(231, 76, 60, 0.15);
}

.faq-question {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 25px;
    cursor: pointer;
    transition: var(--transition);
}

.faq-question:hover {
    background: rgba(231, 76, 60, 0.02);
}

.faq-question-text {
    display: flex;
    align-items: center;
    gap: 15px;
    flex: 1;
}

.faq-question-text i {
    color: var(--primary-color);
    font-size: 1.25rem;
    flex-shrink: 0;
}

.faq-question-text span {
    font-size: 1.05rem;
    font-weight: 600;
    color: var(--text-dark);
}

.faq-toggle-icon {
    width: 32px;
    height: 32px;
    background: var(--bg-light);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: var(--transition);
}

.faq-toggle-icon i {
    color: var(--text-muted);
    transition: var(--transition);
}

.faq-item.active .faq-toggle-icon {
    background: var(--primary-color);
    transform: rotate(180deg);
}

.faq-item.active .faq-toggle-icon i {
    color: white;
}

.faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.faq-item.active .faq-answer {
    max-height: 500px;
}

.faq-answer-inner {
    padding: 0 25px 25px 65px;
    color: var(--text-muted);
    line-height: 1.8;
}

/* ===================================
   SECTION AIDE
   =================================== */
.help-section {
    background: white;
}

.help-card {
    background: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
    border-radius: 20px;
    padding: 60px 40px;
    position: relative;
    overflow: hidden;
}

.help-bg-pattern {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(circle at 20% 50%, rgba(231, 76, 60, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(231, 76, 60, 0.1) 0%, transparent 50%);
    pointer-events: none;
}

.help-content,
.help-actions {
    position: relative;
    z-index: 2;
}

.help-icon {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 25px;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.help-icon i {
    font-size: 2.5rem;
    color: var(--primary-color);
}

.help-title {
    font-size: 2rem;
    font-weight: 700;
    color: white;
    margin-bottom: 15px;
}

.help-description {
    font-size: 1.125rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
}

.help-actions {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.help-action-btn {
    background: white;
    border-radius: 12px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    text-decoration: none;
    transition: var(--transition);
}

.help-action-btn:hover {
    transform: translateX(5px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
}

.help-action-btn .action-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.help-action-btn .action-icon i {
    font-size: 1.5rem;
    color: white;
}

.help-action-btn.primary .action-icon {
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
}

.help-action-btn.success .action-icon {
    background: linear-gradient(135deg, var(--success-color), #20c997);
}

.help-action-btn.whatsapp .action-icon {
    background: linear-gradient(135deg, #25D366, #128C7E);
}

.help-action-btn .action-text {
    flex: 1;
}

.help-action-btn .action-text h5 {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 5px;
}

.help-action-btn .action-text p {
    font-size: 0.875rem;
    color: var(--text-muted);
    margin: 0;
}

.help-action-btn > i.fa-arrow-right {
    color: var(--text-muted);
    transition: var(--transition);
}

.help-action-btn:hover > i.fa-arrow-right {
    color: var(--primary-color);
    transform: translateX(3px);
}

/* ===================================
   SECTION RESSOURCES
   =================================== */
.resources-section {
    background: white;
}

.resources-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
}

.resource-card {
    background: white;
    border: 2px solid #e9ecef;
    border-radius: var(--border-radius);
    padding: 40px 30px;
    text-align: center;
    transition: var(--transition);
}

.resource-card:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(231, 76, 60, 0.15);
}

.resource-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 25px;
    transition: var(--transition);
}

.resource-card:hover .resource-icon {
    transform: scale(1.1) rotate(5deg);
}

.resource-icon i {
    font-size: 2rem;
    color: white;
}

.resource-title {
    font-size: 1.375rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 15px;
}

.resource-description {
    font-size: 1rem;
    color: var(--text-muted);
    line-height: 1.6;
    margin-bottom: 25px;
}

.resource-link {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 25px;
    background: var(--bg-light);
    color: var(--primary-color);
    text-decoration: none;
    border-radius: 50px;
    font-weight: 600;
    transition: var(--transition);
}

.resource-link:hover {
    background: var(--primary-color);
    color: white;
}

.resource-link i {
    transition: var(--transition);
}

.resource-link:hover i {
    transform: translateX(3px);
}

/* ===================================
   RESPONSIVE
   =================================== */
@media (max-width: 991px) {
    .faq-hero-title {
        font-size: 2.5rem;
    }
    
    .section-title {
        font-size: 2rem;
    }
    
    .help-card {
        padding: 40px 30px;
    }
    
    .help-title {
        font-size: 1.75rem;
    }
}

@media (max-width: 767px) {
    .section-modern {
        padding: 60px 0;
    }
    
    .faq-hero {
        padding: 80px 0 60px;
    }
    
    .faq-hero-title {
        font-size: 2rem;
    }
    
    .faq-search-card {
        padding: 30px 20px;
    }
    
    .section-header {
        margin-bottom: 40px;
    }
    
    .section-title {
        font-size: 1.75rem;
    }
    
    .faq-categories-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }
    
    .faq-category-card {
        padding: 25px 20px;
    }
    
    .category-icon {
        width: 60px;
        height: 60px;
    }
    
    .category-icon i {
        font-size: 1.75rem;
    }
    
    .category-header-title {
        font-size: 1.5rem;
    }
    
    .faq-question {
        padding: 15px 20px;
    }
    
    .faq-question-text {
        gap: 10px;
    }
    
    .faq-question-text i {
        font-size: 1.1rem;
    }
    
    .faq-question-text span {
        font-size: 0.95rem;
    }
    
    .faq-answer-inner {
        padding: 0 20px 20px 50px;
    }
    
    .help-card {
        padding: 30px 20px;
    }
    
    .help-title {
        font-size: 1.5rem;
    }
    
    .help-description {
        font-size: 1rem;
    }
    
    .resources-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
}

@media (max-width: 575px) {
    .faq-hero-title {
        font-size: 1.75rem;
    }
    
    .search-input-wrapper input {
        padding: 14px 45px 14px 50px;
        font-size: 0.9rem;
    }
    
    .faq-categories-grid {
        grid-template-columns: 1fr;
    }
    
    .faq-category-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .category-icon-header {
        width: 60px;
        height: 60px;
    }
    
    .category-icon-header i {
        font-size: 1.75rem;
    }
    
    .help-action-btn {
        padding: 15px;
    }
    
    .help-action-btn .action-icon {
        width: 45px;
        height: 45px;
    }
    
    .help-action-btn .action-icon i {
        font-size: 1.25rem;
    }
}
</style>

<!-- ========================================
     JAVASCRIPT
     ======================================== -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // ============================================
    // ACCORDION FAQ
    // ============================================
    const faqItems = document.querySelectorAll('[data-faq-item]');
    
    faqItems.forEach(item => {
        const toggle = item.querySelector('[data-faq-toggle]');
        
        toggle.addEventListener('click', function() {
            const isActive = item.classList.contains('active');
            
            // Fermer tous les autres items
            faqItems.forEach(otherItem => {
                if (otherItem !== item) {
                    otherItem.classList.remove('active');
                }
            });
            
            // Toggle l'item actuel
            if (isActive) {
                item.classList.remove('active');
            } else {
                item.classList.add('active');
            }
        });
    });
    
    // ============================================
    // RECHERCHE FAQ
    // ============================================
    const searchInput = document.getElementById('faq-search');
    const clearButton = document.getElementById('clear-search');
    const searchResults = document.getElementById('search-results');
    
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase().trim();
            
            // Afficher/masquer le bouton clear
            if (searchTerm.length > 0) {
                clearButton.style.display = 'block';
            } else {
                clearButton.style.display = 'none';
                searchResults.innerHTML = '';
                return;
            }
            
            // Rechercher dans toutes les questions
            if (searchTerm.length >= 2) {
                const results = [];
                
                faqItems.forEach(item => {
                    const question = item.querySelector('.faq-question-text span').textContent.toLowerCase();
                    const answer = item.querySelector('.faq-answer-inner').textContent.toLowerCase();
                    
                    if (question.includes(searchTerm) || answer.includes(searchTerm)) {
                        results.push({
                            question: item.querySelector('.faq-question-text span').textContent,
                            answer: item.querySelector('.faq-answer-inner').textContent.substring(0, 150) + '...',
                            element: item
                        });
                    }
                });
                
                // Afficher les résultats
                if (results.length > 0) {
                    searchResults.innerHTML = `
                        <div class="mb-3">
                            <strong>${results.length} résultat${results.length > 1 ? 's' : ''} trouvé${results.length > 1 ? 's' : ''}</strong>
                        </div>
                    `;
                    
                    results.forEach(result => {
                        const resultItem = document.createElement('div');
                        resultItem.className = 'search-result-item';
                        resultItem.innerHTML = `
                            <strong class="d-block mb-2">${highlightText(result.question, searchTerm)}</strong>
                            <small class="text-muted">${highlightText(result.answer, searchTerm)}</small>
                        `;
                        
                        resultItem.addEventListener('click', function() {
                            // Scroll vers la question
                            result.element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            
                            // Ouvrir la question
                            faqItems.forEach(item => item.classList.remove('active'));
                            result.element.classList.add('active');
                            
                            // Highlight temporaire
                            result.element.style.backgroundColor = 'rgba(231, 76, 60, 0.1)';
                            setTimeout(() => {
                                result.element.style.backgroundColor = '';
                            }, 2000);
                            
                            // Vider la recherche
                            searchInput.value = '';
                            clearButton.style.display = 'none';
                            searchResults.innerHTML = '';
                        });
                        
                        searchResults.appendChild(resultItem);
                    });
                } else {
                    searchResults.innerHTML = `
                        <div class="text-center text-muted py-3">
                            <i class="fas fa-search mb-2" style="font-size: 2rem;"></i>
                            <p>Aucun résultat trouvé pour "${searchTerm}"</p>
                        </div>
                    `;
                }
            }
        });
        
        // Bouton clear
        if (clearButton) {
            clearButton.addEventListener('click', function() {
                searchInput.value = '';
                this.style.display = 'none';
                searchResults.innerHTML = '';
                searchInput.focus();
            });
        }
    }
    
    // Fonction pour highlight le texte recherché
    function highlightText(text, search) {
        if (!search) return text;
        const regex = new RegExp(`(${search})`, 'gi');
        return text.replace(regex, '<mark style="background-color: rgba(231, 76, 60, 0.2); padding: 2px 4px; border-radius: 3px;">$1</mark>');
    }
    
    // ============================================
    // SMOOTH SCROLL POUR LES LIENS D'ANCRAGE
    // ============================================
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href !== '#' && href.length > 1) {
                e.preventDefault();
                const target = document.querySelector(href);
                if (target) {
                    const offset = 100;
                    const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
    
    // ============================================
    // OUVRIR LA PREMIÈRE QUESTION DE CHAQUE CATÉGORIE
    // ============================================
    document.querySelectorAll('.faq-category-section').forEach(category => {
        const firstItem = category.querySelector('[data-faq-item]');
        if (firstItem) {
            firstItem.classList.add('active');
        }
    });
});
</script>

{% endblock %}

{% block extra_js %}
<!-- AOS Animation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script>
    AOS.init({
        duration: 800,
        easing: 'ease-in-out',
        once: true,
        offset: 100
    });
</script>
{% endblock %}